<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spotify Listening Time Tracker</title>
</head>
<body>
    <h1>Spotify Listening Time Tracker</h1>
    <p>Total Listening Time: <span id="totalListeningTime">Calculating...</span></p>

    <script>
        const accessToken ='BQBQFVAth8IkskBG1TLU2R63XO0wBdxvpfI6TX2PuaVlhgTyE7Fw4SsiyiTVBSjNfkhpBEQrZM_2_JblxZ7qqnXKAnsCtPw5uR-VANYsN4s_CtOa98bIDQQ5vBkIRxsfCXhfVldrF3tFkMmdNEz15mWSSvu_SARMNyIAhyqTLZYn8QsKEW1lHpm0tKWBuWCZCR8v8a00SYp_UbFmeUTiciaZgU_mtR7Ybm14Wd7CD-jpRVBaPiF-SCTl0KsUE6R5sEWY490e7Y-rsbhhBDm6oaKFZLRE'; // Replace with your access token
        const endpoint = 'https://api.spotify.com/v1/me/player/recently-played?limit=50'; // Endpoint for recently played tracks

        async function fetchListeningHistory() {
            try {
                const response = await fetch(endpoint, {
                    headers: {
                        'Authorization': `Bearer ${accessToken}`
                    }
                });
                const data = await response.json();
                return data.items;
            } catch (error) {
                console.error('Error fetching listening history:', error);
                return [];
            }
        }

        function calculateTotalListeningTime(history) {
            let totalMilliseconds = 0;
            history.forEach(item => {
                totalMilliseconds += item.track.duration_ms;
            });

            const totalHours = (totalMilliseconds / (1000 * 60 * 60)).toFixed(2);
            return totalHours;
        }

        async function updateTotalListeningTime() {
            try {
                const listeningHistory = await fetchListeningHistory();
                const totalListeningTimeElement = document.getElementById('totalListeningTime');
                const totalListeningTime = calculateTotalListeningTime(listeningHistory);
                totalListeningTimeElement.textContent = totalListeningTime + ' hours';
            } catch (error) {
                console.error('Error updating total listening time:', error);
                const totalListeningTimeElement = document.getElementById('totalListeningTime');
                totalListeningTimeElement.textContent = 'Error';
            }
        }

        updateTotalListeningTime();
    </script>
</body>
</html>
